<div class="container mt-5">
  <div class="row">
  </div>
  <div class="row mt-5">
    <div class="col-5">
      <div>
        <h2 class="mb-3">My Profile</h2>
        <% if @user.photo.key != nil %>
          <%= cl_image_tag @user.photo.key, class: "rounded-circle shadow p-1 mb-2 bg-white rounded", style: "width: 150" %>
          <% end %>
        </div>
        <div>
          <h3><%= @user.first_name %> <%= @user.last_name %></h3>
        </div>
        <div>
          <p><%= @user.email %></p>
        </div>
        <div>
        <p><%= @user.bio %></p>
      </div>
        <div>
          <p>My Home Address:</p>
          <p><%= @user.address %></p>
        </div>
        <%= link_to "Edit my Profile", edit_user_registration_path(@user), class: "btn btn-primary mt-3"%>
      <div class="mx-auto mt-4 rounded-5" style="width: 100%; height: 300px;"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
    </div>
    <div class="col-sm">
        <h2 class="mb-3">My Creatures</h2>
        <div>
        <% @user.pets.each do |pet| %>
          <h3> <%= pet.name %> </h3>
          <% if pet.photo.key != nil %>
          <%= cl_image_tag pet.photo.key, class: "rounded-3 shadow p-1 mb-4 bg-white rounded", style: "width: 150 height: 150 object-fit: cover" %>
          <% end %>
          <p> <%= pet.description %> </p>
          <p> <strong>Species: </strong><%= pet.species %> </p>
          <p> <strong>Gender:</strong> <%= pet.gender %> </p>
          <p> <strong>Special Notes: </strong><%= pet.special_notes %> </p>
          <p class="mb-5"> <strong>Listed Price: </strong>$<%= pet.price %> </p>
        <% end %>
        </div>
    </div>
    <div class="col-sm">
        <div>
          <h2 class="mb-3">My Booking Requests</h2>
          <table>
            <thead>
              <tr>
                <th>Start Date</th>
                <th>End Date</th>
                <th>User</th>
                <th>Status</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <% @user.bookings.each do |booking| %>
                <tr>
                  <td><%= booking.start_date %></td>
                  <td><%= booking.end_date %></td>
                  <td><%= booking.user.email %></td>
                  <td>
                    <% if booking.accepted? %>
                      <span class="badge badge-success">Accepted</span>
                     <% elsif booking.rejected? %>
                      <span class="badge badge-danger">Rejected</span>
                    <% else %>
                      <span class="badge badge-warning">Pending</span>
                    <% end %>
                  </td>
                  <td>
                    <% if booking.pending? %>
                      <%= link_to "Accept", accept_booking_path(booking), method: :put, class: "btn btn-sm btn-success" %>
                      <%= link_to "Reject", reject_booking_path(booking), method: :put, class: "btn btn-sm btn-success" %>
                    <% end %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
    </div>
  </div>
  <div class="row">
  footer</div>
</div>
